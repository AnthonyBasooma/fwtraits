"Sphaerobotrys fluviatilis",
"Stigeoclonium farctum",
"Stigeoclonium tenue",
"Tetraspora gelatinosa",
"Thorea hispida"),
mp = c("Amblystegium fluviatile",
"Amblystegium humile",
"Amblystegium riparium",
"Amblystegium serpens",
"Amblystegium tenax",
"Amblystegium varium")),
organismgroup = c('mi','fi', 'pp', 'mp', 'pb'),
ecoparams = list(mi=c('life duration Odonata', 'stream zonation preferecne'),
fi= c('cathment region', 'migration', 'threat austria',
'climate change affected'),
pp = c('stenoecy factor', 'aquaticity','life form'),
pb = c('substrate preference'),
mp = c('zone - systema')),
taxalevel = 'species')
devtools::load_all(".")
fw_visualize(yy, organism_group = 'mi', na.rm = TRUE)
fw_visualize(multspp_df)
yy <- fw_fetchdata(data = list(mi=c('Aeshna affinis', 'Aeshna crenata',
'Aeshna mixta', 'Aeshna subarctica', 'Aeshna viridis'),
fi=c("Abramsi brama"),
pp= c("Anathece clathrata",
"Anathece minutissima",
"Anthophysa vegetans",
"Apocalathium aciculiferum",
"Adlafia minuscula var. muralis"),
pb =c("Gongrosira debaryana",
"Gongrosira fluminensis",
"Hydrodictyon reticulatum",
"Sphaerobotrys fluviatilis",
"Stigeoclonium farctum",
"Stigeoclonium tenue",
"Tetraspora gelatinosa",
"Thorea hispida"),
mp = c("Amblystegium fluviatile",
"Amblystegium humile",
"Amblystegium riparium",
"Amblystegium serpens",
"Amblystegium tenax",
"Amblystegium varium")),
organismgroup = c('mi','fi', 'pp', 'mp', 'pb'),
ecoparams = list(mi=c('life duration Odonata', 'stream zonation preferecne'),
fi= c('cathment region', 'migration', 'threat austria',
'climate change affected'),
pp = c('stenoecy factor', 'aquaticity','life form'),
pb = c('substrate preference'),
mp = c('zone - systema')),
taxalevel = 'species')
yy <- fw_fetchdata(data = list(mi=c('Aeshna affinis', 'Aeshna crenata',
'Aeshna mixta', 'Aeshna subarctica', 'Aeshna viridis'),
fi=c("Abramsi brama"),
pp= c("Anathece clathrata",
"Anathece minutissima",
"Anthophysa vegetans",
"Apocalathium aciculiferum",
"Adlafia minuscula var. muralis"),
pb =c("Gongrosira debaryana",
"Gongrosira fluminensis",
"Hydrodictyon reticulatum",
"Sphaerobotrys fluviatilis",
"Stigeoclonium farctum",
"Stigeoclonium tenue",
"Tetraspora gelatinosa",
"Thorea hispida"),
mp = c("Amblystegium fluviatile",
"Amblystegium humile",
"Amblystegium riparium",
"Amblystegium serpens",
"Amblystegium tenax",
"Amblystegium varium")),
organismgroup = c('mi','fi', 'pp', 'mp', 'pb'),
ecoparams = list(mi=c('life duration Odonata', 'stream zonation preferecne'),
fi= c('cathment region', 'migration', 'threat austria',
'climate change affected'),
pp = c('stenoecy factor', 'aquaticity','life form'),
pb = c('substrate preference'),
mp = c('zone - systema')),
taxalevel = 'species')
fw_visualize(yy, organism_group = 'mi', na.rm = TRUE)
View(yy)
key_l <- Sys.getenv()
key_l
View(yy)
colnames(yy)
View(yy)
devtools::load_all(".")
mipbdata <- fw_fetchdata(data = list(mi=c("Congeria kusceri",
"Congeria leucophaeata",
"Dreissena polymorpha",
"Dreissena rostriformis bugensis"),
pb= c("Gongrosira debaryana",
"Gongrosira fluminensis",
"Hydrodictyon reticulatum",
"Sphaerobotrys fluviatilis",
"Stigeoclonium farctum",
"Stigeoclonium tenue",
"Tetraspora gelatinosa",
"Thorea hispida")),
organismgroup = c('mi','pb'),
ecoparams = list(mi = c('stream zonation preference'),
pb = c('substrate preference')))
mipbdata
devtools::load_all(".")
mipbdata <- fw_fetchdata(data = list(mi=c("Congeria kusceri",
"Congeria leucophaeata",
"Dreissena polymorpha",
"Dreissena rostriformis bugensis"),
pb= c("Gongrosira debaryana",
"Gongrosira fluminensis",
"Hydrodictyon reticulatum",
"Sphaerobotrys fluviatilis",
"Stigeoclonium farctum",
"Stigeoclonium tenue",
"Tetraspora gelatinosa",
"Thorea hispida")),
organismgroup = c('mi','pb'),
ecoparams = list(mi = c('stream zonation preference'),
pb = c('substrate preference')))
devtools::load_all(".")
devtools::load_all(".")
mipbdata <- fw_fetchdata(data = list(mi=c("Congeria kusceri",
"Congeria leucophaeata",
"Dreissena polymorpha",
"Dreissena rostriformis bugensis"),
pb= c("Gongrosira debaryana",
"Gongrosira fluminensis",
"Hydrodictyon reticulatum",
"Sphaerobotrys fluviatilis",
"Stigeoclonium farctum",
"Stigeoclonium tenue",
"Tetraspora gelatinosa",
"Thorea hispida")),
organismgroup = c('mi','pb'),
ecoparams = list(mi = c('stream zonation preference'),
pb = c('substrate preference')))
devtools::load_all(".")
mipbdata <- fw_fetchdata(data = list(mi=c("Congeria kusceri",
"Congeria leucophaeata",
"Dreissena polymorpha",
"Dreissena rostriformis bugensis"),
pb= c("Gongrosira debaryana",
"Gongrosira fluminensis",
"Hydrodictyon reticulatum",
"Sphaerobotrys fluviatilis",
"Stigeoclonium farctum",
"Stigeoclonium tenue",
"Tetraspora gelatinosa",
"Thorea hispida")),
organismgroup = c('mi','pb'),
ecoparams = list(mi = c('stream zonation preference'),
pb = c('substrate preference')))
devtools::load_all(".")
mipbdata
head(mipbdata)
ss <- fw_keyload()
devtools::load_all(".")
ss <- fw_keyload()
fidata <- fw_searchdata(organismgroup =  c('mi','fi', 'pp', 'mp', 'pb'),
ecoparams =  list(mi=c('life duration Odonata', 'stream zonation preferecne'),
fi= c('cathment region', 'migration', 'threat austria',
'rheophily habitat', 'habitat fiBS', 'temperature tolerance'),
pp = c('stenoecy factor','life form'),
mp = c('zone - systema'),
pb = c("life form", 'substrate preference')),
taxa_searched = list(mi =c('Aeshna affinis', 'Aeshna crenata',
'Aeshna mixta', 'Aeshna subarctica', 'Aeshna viridis'),
pb=c('Fallacia insociabilis', 'Encyonema aequilongum')),
apikey =   ss,
taxalevel = 'species',
secure = TRUE,
seed = 1212,
warn = TRUE)
fidatapb <- fw_searchdata(organismgroup =  'pb',
ecoparams =  c('substrate preference'),
taxa_searched  = c('Cyanophyceae', 'Chlorophyceae'),
apikey =   ss,
taxalevel = 'taxagroup',
secure = TRUE,
seed = 1212,
warn = TRUE)
yy <- fw_fetchdata(data = list(mi=c('Aeshna affinis', 'Aeshna crenata',
'Aeshna mixta', 'Aeshna subarctica', 'Aeshna viridis'),
fi=c("Abramsi brama"),
pp= c("Anathece clathrata",
"Anathece minutissima",
"Anthophysa vegetans",
"Apocalathium aciculiferum",
"Adlafia minuscula var. muralis"),
pb =c("Gongrosira debaryana",
"Gongrosira fluminensis",
"Hydrodictyon reticulatum",
"Sphaerobotrys fluviatilis",
"Stigeoclonium farctum",
"Stigeoclonium tenue",
"Tetraspora gelatinosa",
"Thorea hispida"),
mp = c("Amblystegium fluviatile",
"Amblystegium humile",
"Amblystegium riparium",
"Amblystegium serpens",
"Amblystegium tenax",
"Amblystegium varium")),
organismgroup = c('mi','fi', 'pp', 'mp', 'pb'),
ecoparams = list(mi=c('life duration Odonata', 'stream zonation preferecne'),
fi= c('cathment region', 'migration', 'rheophily habitat',
'climate change affected'),
pp = c('stenoecy factor', 'aquaticity','life form'),
pb = c('substrate preference'),
mp = c('zone - systema')),
inform = TRUE,
taxalevel = 'species', summary = TRUE)
yy <- fw_fetchdata(data = list(mi=c('Aeshna affinis', 'Aeshna crenata',
'Aeshna mixta', 'Aeshna subarctica', 'Aeshna viridis'),
fi=c("Abramsi brama"),
pp= c("Anathece clathrata",
"Anathece minutissima",
"Anthophysa vegetans",
"Apocalathium aciculiferum",
"Adlafia minuscula var. muralis"),
pb =c("Gongrosira debaryana",
"Gongrosira fluminensis",
"Hydrodictyon reticulatum",
"Sphaerobotrys fluviatilis",
"Stigeoclonium farctum",
"Stigeoclonium tenue",
"Tetraspora gelatinosa",
"Thorea hispida"),
mp = c("Amblystegium fluviatile",
"Amblystegium humile",
"Amblystegium riparium",
"Amblystegium serpens",
"Amblystegium tenax",
"Amblystegium varium")),
organismgroup = c('mi','fi', 'pp', 'mp', 'pb'),
ecoparams = list(mi=c('life duration Odonata', 'stream zonation preferecne'),
fi= c('cathment region', 'migration', 'rheophily habitat',
'climate change affected'),
pp = c('stenoecy factor', 'aquaticity','life form'),
pb = c('substrate preference'),
mp = c('zone - systema')),
inform = TRUE,
taxalevel = 'species', details = TRUE)
devtools::load_all(".")
yy <- fw_fetchdata(data = list(mi=c('Aeshna affinis', 'Aeshna crenata',
'Aeshna mixta', 'Aeshna subarctica', 'Aeshna viridis'),
fi=c("Abramsi brama"),
pp= c("Anathece clathrata",
"Anathece minutissima",
"Anthophysa vegetans",
"Apocalathium aciculiferum",
"Adlafia minuscula var. muralis"),
pb =c("Gongrosira debaryana",
"Gongrosira fluminensis",
"Hydrodictyon reticulatum",
"Sphaerobotrys fluviatilis",
"Stigeoclonium farctum",
"Stigeoclonium tenue",
"Tetraspora gelatinosa",
"Thorea hispida"),
mp = c("Amblystegium fluviatile",
"Amblystegium humile",
"Amblystegium riparium",
"Amblystegium serpens",
"Amblystegium tenax",
"Amblystegium varium")),
organismgroup = c('mi','fi', 'pp', 'mp', 'pb'),
ecoparams = list(mi=c('life duration Odonata', 'stream zonation preferecne'),
fi= c('cathment region', 'migration', 'rheophily habitat',
'climate change affected'),
pp = c('stenoecy factor', 'aquaticity','life form'),
pb = c('substrate preference'),
mp = c('zone - systema')),
inform = TRUE,
taxalevel = 'species', details = TRUE)
devtools::load_all(".")
yy <- fw_fetchdata(data = list(mi=c('Aeshna affinis', 'Aeshna crenata',
'Aeshna mixta', 'Aeshna subarctica', 'Aeshna viridis'),
fi=c("Abramsi brama"),
pp= c("Anathece clathrata",
"Anathece minutissima",
"Anthophysa vegetans",
"Apocalathium aciculiferum",
"Adlafia minuscula var. muralis"),
pb =c("Gongrosira debaryana",
"Gongrosira fluminensis",
"Hydrodictyon reticulatum",
"Sphaerobotrys fluviatilis",
"Stigeoclonium farctum",
"Stigeoclonium tenue",
"Tetraspora gelatinosa",
"Thorea hispida"),
mp = c("Amblystegium fluviatile",
"Amblystegium humile",
"Amblystegium riparium",
"Amblystegium serpens",
"Amblystegium tenax",
"Amblystegium varium")),
organismgroup = c('mi','fi', 'pp', 'mp', 'pb'),
ecoparams = list(mi=c('life duration Odonata', 'stream zonation preferecne'),
fi= c('cathment region', 'migration', 'rheophily habitat',
'climate change affected'),
pp = c('stenoecy factor', 'aquaticity','life form'),
pb = c('substrate preference'),
mp = c('zone - systema')),
inform = TRUE,
taxalevel = 'species', details = TRUE)
devtools::load_all(".")
yy <- fw_fetchdata(data = list(mi=c('Aeshna affinis', 'Aeshna crenata',
'Aeshna mixta', 'Aeshna subarctica', 'Aeshna viridis'),
fi=c("Abramsi brama"),
pp= c("Anathece clathrata",
"Anathece minutissima",
"Anthophysa vegetans",
"Apocalathium aciculiferum",
"Adlafia minuscula var. muralis"),
pb =c("Gongrosira debaryana",
"Gongrosira fluminensis",
"Hydrodictyon reticulatum",
"Sphaerobotrys fluviatilis",
"Stigeoclonium farctum",
"Stigeoclonium tenue",
"Tetraspora gelatinosa",
"Thorea hispida"),
mp = c("Amblystegium fluviatile",
"Amblystegium humile",
"Amblystegium riparium",
"Amblystegium serpens",
"Amblystegium tenax",
"Amblystegium varium")),
organismgroup = c('mi','fi', 'pp', 'mp', 'pb'),
ecoparams = list(mi=c('life duration Odonata', 'stream zonation preferecne'),
fi= c('cathment region', 'migration', 'rheophily habitat',
'climate change affected'),
pp = c('stenoecy factor', 'aquaticity','life form'),
pb = c('substrate preference'),
mp = c('zone - systema')),
inform = TRUE,
taxalevel = 'species', details = TRUE)
fdata <- speciesdata
yy <- fw_fetchdata(data= fdata,
organismgroup = 'fi',
ecoparams = c("catchment region"),
taxalevel = 'species',
cachefolder = 'cache',
details = TRUE)
View(fdata)
yy <- fw_fetchdata(data= fdata,
organismgroup = 'fi',
ecoparams = c("catchment region"),
taxonomic_column = 'scientificName',
taxalevel = 'species',
cachefolder = 'cache',
details = TRUE)
devtools::load_all(".")
yy <- fw_fetchdata(data= fdata,
organismgroup = 'fi',
ecoparams = c("catchment region"),
taxonomic_column = 'scientificName',
taxalevel = 'species',
cachefolder = 'cache',
details = TRUE)
datalists <- fw_searchdata(organismgroup = 'fi',
ecoparams = c("catchment region"))
dbgui <- fw_dbguide()
paramlist1 <- fw_paramlist()
paramlist1 <- fw_paramlist()
library(rivnet)
install.packages('rivnet')
install.packages("eDITH")
library(rivnet)
library(eDITH)
# Extract river from DEM
river <- rivnet::extract_river(outlet=c(637478,237413),
EPSG=21781, #CH1903/LV03 coordinate system
ext=c(6.2e5,6.6e5,2e5,2.5e5),
z=9)
# Aggregate river - default thrA and maxReachLength = 2500 m
river <- rivnet::aggregate_river(river, maxReachLength = 2500)
# Extract river from DEM
river <- rivnet::extract_river(outlet=c(637478,237413),
EPSG=21781, #CH1903/LV03 coordinate system
ext=c(6.2e5,6.6e5,2e5,2.5e5),
z=9)
# Aggregate river - default thrA and maxReachLength = 2500 m
river1 <- rivnet::aggregate_river(river, maxReachLength = 2500)
# Hydraulic data: width = 8 m, discharge = 15 m3/s at the outlet
hydrodata <- data.frame(data = c(8, 15),
type = c("w", "Q"),
node = river$AG$outlet*c(1, 1))
# Hydraulic data: width = 8 m, discharge = 15 m3/s at the outlet
hydrodata <- data.frame(data = c(8, 15),
type = c("w", "Q"),
node = river1$AG$outlet*c(1, 1))
river1$AG$outlet
# Assign hydraulic variables across the river network
river <- rivnet::hydro_river(hydrodata, river)
View(hydrodata)
# Assign hydraulic variables across the river network
river2 <- rivnet::hydro_river(hydrodata, river1)
# Attribute landcover classes as covariates
r1 <- terra::rast(system.file("extdata/landcover.tif",
package = "rivnet"))
river3 <- rivnet::covariate_river(r1, river2)
data(dataC)
View(dataC)
dataC[which(dataC$ID==2),]
sites <- unique(dataC$ID)
values <- numeric(length(sites))
for (ind in 1:length(sites)){
s <- sites[ind]
values[ind] <- mean(dataC$values[dataC$ID==s])
}
plot(river3)
rivnet::points_colorscale(river1$AG$X[unique(dataC$ID)], river1$AG$Y[unique(dataC$ID)],
values)
title("Mean observed DNA concentration [mol m-3]")
covariates <- data.frame(urban = river3$SC$locCov$landcover_1,
agriculture = river3$SC$locCov$landcover_2,
forest = river3$SC$locCov$landcover_3,
elev = river1$AG$Z,
log_drainageArea = log(river1$AG$A))
covariates
set.seed(1)
out.bt.cov <- run_eDITH_BT(dataC, river, covariates)
out.bt.cov <- run_eDITH_BT(dataC, river3, covariates)
set.seed(1)
out.bt.aem <- run_eDITH_BT(dataC, river3)
# Extract river from DEM
river <- rivnet::extract_river(outlet=c(637478,237413),
EPSG=21781, #CH1903/LV03 coordinate system
ext=c(6.2e5,6.6e5,2e5,2.5e5),
z=9)
?extract_river
# Extract river from DEM
river <- rivnet::extract_river(outlet=c(4770353.2, 1624235.7),
EPSG= 3034, #EPSG:3034 ETRS89-extended / LCC Europe
ext=c(4895595.9,4840101.2,1374359.5,1682601.5),
z=9)
# Extract river from DEM
river <- rivnet::extract_river(outlet=c(4770353.2, 1624235.7),
EPSG= 3034, #EPSG:3034 ETRS89-extended / LCC Europe
ext=c(4895595.9,5840101.2,1374359.5,1682601.5),
z=9)
# Extract river from DEM
river <- rivnet::extract_river(outlet=c(4770353.2, 1624235.7),
EPSG= 3034, #EPSG:3034 ETRS89-extended / LCC Europe
ext=c(4795595.9,5840101.2,1374359.5,1682601.5),
z=9)
# xmin = 4895595.964652871
# ymin = 1374359.546945683
# xmax = 4840101.216822789
# ymax = 1682601.5978255253
ext=c(4795595.9,5840101.2,1374359.5,1682601.5)
outlet=c(4770353.2, 1624235.7)
outlet[,1]>ext[2]
outlet[,1]
outlet <- matrix(outlet, nrow=length(outlet)/2, ncol=2, byrow=T)
outlet
outlet[,1]>ext[2]
outlet[,1]<ext[1]
outlet[,2]>ext[4]
outlet[,2]<ext[3]
outlet[,1]>ext[2]
(any(outlet[,1]>ext[2] | outlet[,1]<ext[1] | outlet[,2]>ext[4] | outlet[,2]<ext[3]) )
outlet=c(4770353.2, 1624235.7)
outlet[,1]<ext[1]
outlet <- matrix(outlet, nrow=length(outlet)/2, ncol=2, byrow=T)
outlet[,1]<ext[1]
outlet
# xmin = 4895595.964652871
# ymin = 1374359.546945683
# xmax = 4840101.216822789
# ymax = 1682601.5978255253
ext=c(4895595.9,5840101.2,1374359.5,1682601.5)
outlet=c(4770353.2, 1624235.7)
outlet[,1]<ext[1]
outlet=c(4770353.2, 1624235.7)
outlet <- matrix(outlet, nrow=length(outlet)/2, ncol=2, byrow=T)
outlet[,1]<ext[1]
(any(outlet[,1]>ext[2] | outlet[,1]<ext[1] | outlet[,2]>ext[4] | outlet[,2]<ext[3]) )
(any(outlet[,1]>ext[2] | outlet[,1]<ext[1] | outlet[,2]>ext[4] | outlet[,2]<ext[3]) )stop('hh')
if(any(outlet[,1]>ext[2] | outlet[,1]<ext[1] | outlet[,2]>ext[4] | outlet[,2]<ext[3]))stop('hh')
# xmin = 4895595.964652871
# ymin = 1374359.546945683
# xmax = 4840101.216822789
# ymax = 1682601.5978255253
ext=c(4695595.9,5840101.2,1374359.5,1682601.5)
outlet=c(4770353.2, 1624235.7)
outlet <- matrix(outlet, nrow=length(outlet)/2, ncol=2, byrow=T)
if(any(outlet[,1]>ext[2] | outlet[,1]<ext[1] | outlet[,2]>ext[4] | outlet[,2]<ext[3]))stop('hh')
# Extract river from DEM
river <- rivnet::extract_river(outlet=c(4770353.2, 1624235.7),
EPSG= 3034, #EPSG:3034 ETRS89-extended / LCC Europe
ext=c(4695595.9,5840101.2,1374359.5,1682601.5),
z=9)
# Extract river from DEM
river <- rivnet::extract_river(outlet=c(4770353.2, 1624235.7),
EPSG= 3034, #EPSG:3034 ETRS89-extended / LCC Europe
ext=c(4695595.9,5840101.2,1374359.5,1682601.5),
z=9, displayUpdates = TRUE)
river
plot(river)
rm(outlet)
# Extract river from DEM
river2222 <- rivnet::extract_river(outlet=c(4770334.3, 1624236.6),
EPSG= 3034, #EPSG:3034 ETRS89-extended / LCC Europe
ext=c(4710334,4840101.2,1374359.5,1639601.5),
z=9, displayUpdates = TRUE)
