<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Computing functional diversity indices and community weghted means for fishes. • fwtraits</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Computing functional diversity indices and community weghted means for fishes.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fwtraits</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/data_for_taxa_groups.html">Retrieve data for taxomomic groups.</a></li>
    <li><a class="dropdown-item" href="../articles/fishcompute.html">Computing functional diversity indices and community weghted means for fishes.</a></li>
    <li><a class="dropdown-item" href="../articles/functiondendo.html">Compute fucntional dendogram from the ecological parameters.</a></li>
    <li><a class="dropdown-item" href="../articles/macroinverts.html">Computing functional diversity indices and community weghted means for macroinvertebrates.</a></li>
    <li><a class="dropdown-item" href="../articles/Secure_API_key.html">How to handle the API key in public and private codes.</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/AnthonyBasooma/fwtraits/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Computing functional diversity indices and community weghted means for fishes.</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/AnthonyBasooma/fwtraits/blob/master/vignettes/fishcompute.Rmd" class="external-link"><code>vignettes/fishcompute.Rmd</code></a></small>
      <div class="d-none name"><code>fishcompute.Rmd</code></div>
    </div>

    
    
<p>The <strong>fwtraits</strong> access the www.freshwaterecology.info
database that contains several ecological parameters, traits, and
indicators used in biogeographical modeling, functional diversity and
taxonomic assessments, and environmental monitoring. These are grouped
based on the taxonomic groups, including macroinvertebrates, fishes,
phytoplankton, phytobenthos, and macrophytes. Therefore, in this
workflow, we demonstrated using ecological parameters from the database
in assessing functional diversity.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/AnthonyBasooma/fwtraits" class="external-link">fwtraits</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="fishes-data-used-in-the-analysis">Fishes data used in the analysis<a class="anchor" aria-label="anchor" href="#fishes-data-used-in-the-analysis"></a>
</h3>
<p>We tested using the species data with both spatial coordinates to
auto-generate sites or sites already indicated in the sites or species
data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"speciesdata"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1135</span><span class="op">)</span></span>
<span><span class="va">speciesdata</span><span class="op">$</span><span class="va">abund</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">speciesdata</span><span class="op">)</span>, <span class="fl">4.3</span>, <span class="fl">1.2</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#species with geographical coordinates</span></span>
<span></span>
<span><span class="va">geospdata</span> <span class="op">&lt;-</span> <span class="va">speciesdata</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span>coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'decimalLongitude'</span>, <span class="st">'decimalLatitude'</span><span class="op">)</span>, </span>
<span>               crs <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="fl">4326</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="retrieving-the-ecological-parameters-from-the-database">Retrieving the ecological parameters from the database<a class="anchor" aria-label="anchor" href="#retrieving-the-ecological-parameters-from-the-database"></a>
</h3>
<p>We considered two ecological references for fishes: rheophily
habitat, spawning habitat, and feeding diet adult. These were selected
because most species have records, reducing missing values that might
have required imputation.</p>
<p>It should be noted that imputing for missing traits is outside the
scope of this package. So, species that do not have records were dropped
when computing the functional diversity indices or community weighted
means.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">fishtraits</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fw_fetchdata.html">fw_fetchdata</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">speciesdata</span>, </span>
<span>                         ecoparams <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'rheophily habitat'</span>, <span class="st">'spawning habitat'</span>,</span>
<span>                                       <span class="st">'feeding diet adult'</span><span class="op">)</span>, </span>
<span>                         taxonomic_column <span class="op">=</span> <span class="st">'scientificName'</span>,</span>
<span>                         organismgroup <span class="op">=</span> <span class="st">'fi'</span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="compute-functional-diversity-indices">1. Compute functional diversity indices<a class="anchor" aria-label="anchor" href="#compute-functional-diversity-indices"></a>
</h4>
<p>These are computed by setting
<strong><code>FD to TRUE</code></strong> and <strong>abund</strong>
parameter must be provided. They the indices are computed using the
<strong><code>FD</code></strong> package (Laliberté &amp; Legendre
2010). The indices tested included Functional richness (FRic), species
richness (SRic), Functional evenness (FEve), Functional diversity
(FDiv), Functional dispersion (FDis), and Rao quotient (Rao Q).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#fd indices calculated when abundance  is provided.</span></span>
<span></span>
<span><span class="va">fdindices</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fw_fdcompute.html">fw_fdcompute</a></span><span class="op">(</span>fwdata <span class="op">=</span> <span class="va">fishtraits</span>, </span>
<span>                        sitesdata <span class="op">=</span> <span class="va">speciesdata</span>,</span>
<span>                        sites <span class="op">=</span> <span class="st">'waterBody'</span>,</span>
<span>                        species <span class="op">=</span> <span class="st">'scientificName'</span>,</span>
<span>                        abund <span class="op">=</span> <span class="st">'abund'</span>,</span>
<span>                        FD <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">fdindices</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;     site      FRic SRic      FEve      FDiv     FDis      RaoQ</span></span>
<span><span class="co">#&gt; 1  Colne 0.7837022   14 0.6666667 0.7514879 3.130064 10.274519</span></span>
<span><span class="co">#&gt; 2 Mersey 0.9073171   16 0.7142857 0.7992736 3.148708 10.713105</span></span>
<span><span class="co">#&gt; 3 Thames 0.7852545   14 0.5471074 0.7493893 2.843325  8.656933</span></span>
<span></span>
<span><span class="co">#functional richness only: when abundance is not provided.</span></span>
<span><span class="va">fdric</span><span class="op">&lt;-</span> <span class="fu"><a href="../reference/fw_fdcompute.html">fw_fdcompute</a></span><span class="op">(</span>fwdata <span class="op">=</span> <span class="va">fishtraits</span>, </span>
<span>                        sitesdata <span class="op">=</span> <span class="va">speciesdata</span>,</span>
<span>                        sites <span class="op">=</span> <span class="st">'waterBody'</span>,</span>
<span>                        species <span class="op">=</span> <span class="st">'scientificName'</span>,</span>
<span>                        FD <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">fdric</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;         site      FRic SRic</span></span>
<span><span class="co">#&gt; 1        Usk 0.5381900    6</span></span>
<span><span class="co">#&gt; 2       Taff 0.1459965    3</span></span>
<span><span class="co">#&gt; 3 River Lune 0.3203472    3</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="compute-functional-diversity-indices-using-autogenerated-sites-">2. Compute Functional Diversity indices using autogenerated
sites.<a class="anchor" aria-label="anchor" href="#compute-functional-diversity-indices-using-autogenerated-sites-"></a>
</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#fd indices calculated when abundance  is provided.</span></span>
<span></span>
<span><span class="va">geofdind</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fw_fdcompute.html">fw_fdcompute</a></span><span class="op">(</span>fwdata <span class="op">=</span> <span class="va">fishtraits</span>, </span>
<span>                        sitesdata <span class="op">=</span> <span class="va">geospdata</span>,</span>
<span>                        species <span class="op">=</span> <span class="st">'scientificName'</span>,</span>
<span>                        abund <span class="op">=</span> <span class="st">'abund'</span>,</span>
<span>                        FD <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">geofdind</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;    site      FRic SRic      FEve      FDiv     FDis      RaoQ</span></span>
<span><span class="co">#&gt; 1 99116 0.7837022   14 0.6658334 0.7486573 3.146454 10.355734</span></span>
<span><span class="co">#&gt; 2 99172 0.7828410   12 0.6645772 0.7600437 2.927213  9.374808</span></span>
<span><span class="co">#&gt; 3 99260 0.7852545   12 0.6256742 0.7396812 2.880293  8.890285</span></span>
<span></span>
<span><span class="co">#functional richness only: when abundance is not provided.</span></span>
<span><span class="va">geofd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fw_fdcompute.html">fw_fdcompute</a></span><span class="op">(</span>fwdata <span class="op">=</span> <span class="va">fishtraits</span>, </span>
<span>                        sitesdata <span class="op">=</span> <span class="va">geospdata</span>,</span>
<span>                        species <span class="op">=</span> <span class="st">'scientificName'</span>,</span>
<span>                        FD <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">geofd</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;   site      FRic SRic</span></span>
<span><span class="co">#&gt; 1  991        NA    2</span></span>
<span><span class="co">#&gt; 2  993        NA    1</span></span>
<span><span class="co">#&gt; 3  994 0.1459965    3</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="visualisation-of-the-ecological-paramter-for-each-index-">3. Visualisation of the ecological paramter for each index.<a class="anchor" aria-label="anchor" href="#visualisation-of-the-ecological-paramter-for-each-index-"></a>
</h4>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">fdindices</span> <span class="op">|&gt;</span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/gather.html" class="external-link">gather</a></span><span class="op">(</span><span class="st">'fdind'</span>, <span class="st">"vals"</span>, <span class="op">-</span><span class="va">site</span><span class="op">)</span></span>
<span>                                 </span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">site</span>, <span class="va">vals</span>, fill <span class="op">=</span> <span class="va">fdind</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">'identity'</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>        axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span>, size <span class="op">=</span> <span class="fl">7</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">fdind</span>, scales <span class="op">=</span><span class="st">'free_y'</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expansion.html" class="external-link">expansion</a></span><span class="op">(</span>mult <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">'sites'</span>, y<span class="op">=</span><span class="st">'FD indices'</span><span class="op">)</span></span></code></pre></div>
<p><img src="fishcompute_files/figure-html/viz-1.png" width="672" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">#Functional richness</span></span>
<span></span>
<span><span class="va">dffric</span> <span class="op">&lt;-</span> <span class="va">fdric</span> <span class="op">|&gt;</span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/gather.html" class="external-link">gather</a></span><span class="op">(</span><span class="st">'fdind'</span>, <span class="st">"vals"</span>, <span class="op">-</span><span class="va">site</span><span class="op">)</span></span>
<span>                                 </span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dffric</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">site</span>, <span class="va">vals</span>, fill <span class="op">=</span> <span class="va">fdind</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">'identity'</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>        axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span>, size <span class="op">=</span> <span class="fl">7</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">fdind</span>, scales <span class="op">=</span><span class="st">'free_y'</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>expand <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expansion.html" class="external-link">expansion</a></span><span class="op">(</span>mult <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">'Sites'</span>, y<span class="op">=</span><span class="st">'FD indices'</span><span class="op">)</span></span></code></pre></div>
<p><img src="fishcompute_files/figure-html/viz-2.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="compute-community-weighted-means-">4. Compute community weighted means.<a class="anchor" aria-label="anchor" href="#compute-community-weighted-means-"></a>
</h4>
<p>Community weighted means measures how traits vary with environmental
change (Guy-Haim &amp; Bouchet 2025).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cwmdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fw_fdcompute.html">fw_fdcompute</a></span><span class="op">(</span>fwdata <span class="op">=</span> <span class="va">fishtraits</span>, </span>
<span>                        sitesdata <span class="op">=</span> <span class="va">speciesdata</span>,</span>
<span>                        sites <span class="op">=</span> <span class="st">'waterBody'</span>,</span>
<span>                        species <span class="op">=</span> <span class="st">'scientificName'</span>,</span>
<span>                        abund <span class="op">=</span> <span class="st">'abund'</span>,</span>
<span>                        FD <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">cwmdata</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;     site X.rheophily.habitat.eurytopic X.rheophily.habitat.limnophilic</span></span>
<span><span class="co">#&gt; 1  Colne                     0.4598488                      0.12751814</span></span>
<span><span class="co">#&gt; 2 Mersey                     0.3665371                      0.05518399</span></span>
<span><span class="co">#&gt; 3 Thames                     0.4602653                      0.03823995</span></span>
<span><span class="co">#&gt;   X.rheophily.habitat.rheophilic X.rheophily.habitat.rheophilic.A</span></span>
<span><span class="co">#&gt; 1                              0                        0.3424712</span></span>
<span><span class="co">#&gt; 2                              0                        0.5095482</span></span>
<span><span class="co">#&gt; 3                              0                        0.4475848</span></span>
<span><span class="co">#&gt;   X.rheophily.habitat.rheophilic.B X.spawning.habitat.euryoparous</span></span>
<span><span class="co">#&gt; 1                       0.07016187                      0.4440039</span></span>
<span><span class="co">#&gt; 2                       0.06873071                      0.2894240</span></span>
<span><span class="co">#&gt; 3                       0.05390994                      0.2242217</span></span>
<span><span class="co">#&gt;   X.spawning.habitat.limnoparous X.spawning.habitat.rheoparous</span></span>
<span><span class="co">#&gt; 1                      0.2029570                     0.3530391</span></span>
<span><span class="co">#&gt; 2                      0.2081951                     0.5023809</span></span>
<span><span class="co">#&gt; 3                      0.2596240                     0.5161543</span></span>
<span><span class="co">#&gt;   X.feeding.diet.adult.detritivorous X.feeding.diet.adult.invertivorous</span></span>
<span><span class="co">#&gt; 1                         0.00000000                          0.3449768</span></span>
<span><span class="co">#&gt; 2                         0.06693826                          0.3845350</span></span>
<span><span class="co">#&gt; 3                         0.00000000                          0.2437924</span></span>
<span><span class="co">#&gt;   X.feeding.diet.adult.omnivorous X.feeding.diet.adult.piscivorous</span></span>
<span><span class="co">#&gt; 1                       0.5043557                        0.1506675</span></span>
<span><span class="co">#&gt; 2                       0.4272511                        0.1212756</span></span>
<span><span class="co">#&gt; 3                       0.6405770                        0.1156306</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="compute-community-weighted-means-using-raw-traits-">5. Compute community weighted means using raw traits.<a class="anchor" aria-label="anchor" href="#compute-community-weighted-means-using-raw-traits-"></a>
</h4>
<p>In this approach, this does not require fuzzy coding of the trait
data. This is necessary for community weighted means.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cwmdata2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fw_fdcompute.html">fw_fdcompute</a></span><span class="op">(</span>fwdata <span class="op">=</span> <span class="va">fishtraits</span>, </span>
<span>                        sitesdata <span class="op">=</span> <span class="va">speciesdata</span>,</span>
<span>                        sites <span class="op">=</span> <span class="st">'waterBody'</span>,</span>
<span>                        species <span class="op">=</span> <span class="st">'scientificName'</span>,</span>
<span>                        abund <span class="op">=</span> <span class="st">'abund'</span>,</span>
<span>                        FD <span class="op">=</span> <span class="cn">FALSE</span>, dummy <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">cwmdata2</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;     site rheophily.habitat_eurytopic rheophily.habitat_limnophilic</span></span>
<span><span class="co">#&gt; 1  Colne                   0.4598488                    0.12751814</span></span>
<span><span class="co">#&gt; 2 Mersey                   0.3665371                    0.05518399</span></span>
<span><span class="co">#&gt; 3 Thames                   0.4602653                    0.03823995</span></span>
<span><span class="co">#&gt;   rheophily.habitat_rheophilic rheophily.habitat_rheophilic.A</span></span>
<span><span class="co">#&gt; 1                            0                      0.3424712</span></span>
<span><span class="co">#&gt; 2                            0                      0.5095482</span></span>
<span><span class="co">#&gt; 3                            0                      0.4475848</span></span>
<span><span class="co">#&gt;   rheophily.habitat_rheophilic.B spawning.habitat_euryoparous</span></span>
<span><span class="co">#&gt; 1                     0.07016187                    0.4440039</span></span>
<span><span class="co">#&gt; 2                     0.06873071                    0.2894240</span></span>
<span><span class="co">#&gt; 3                     0.05390994                    0.2242217</span></span>
<span><span class="co">#&gt;   spawning.habitat_limnoparous spawning.habitat_rheoparous</span></span>
<span><span class="co">#&gt; 1                    0.2029570                   0.3530391</span></span>
<span><span class="co">#&gt; 2                    0.2081951                   0.5023809</span></span>
<span><span class="co">#&gt; 3                    0.2596240                   0.5161543</span></span>
<span><span class="co">#&gt;   feeding.diet.adult_detritivorous feeding.diet.adult_invertivorous</span></span>
<span><span class="co">#&gt; 1                       0.00000000                        0.3449768</span></span>
<span><span class="co">#&gt; 2                       0.06693826                        0.3845350</span></span>
<span><span class="co">#&gt; 3                       0.00000000                        0.2437924</span></span>
<span><span class="co">#&gt;   feeding.diet.adult_omnivorous feeding.diet.adult_piscivorous</span></span>
<span><span class="co">#&gt; 1                     0.5043557                      0.1506675</span></span>
<span><span class="co">#&gt; 2                     0.4272511                      0.1212756</span></span>
<span><span class="co">#&gt; 3                     0.6405770                      0.1156306</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="refereences">Refereences<a class="anchor" aria-label="anchor" href="#refereences"></a>
</h3>
<ol style="list-style-type: decimal">
<li><p>Laliberté, E., &amp; Legendre, P. (2010). A distance‐based
framework for measuring functional diversity from multiple traits.
Ecology, 91(1), 299-305.</p></li>
<li><p>Guy-Haim, T., &amp; Bouchet, V. M. (2025). Beyond taxonomy: A
framework for biological trait analysis to assess the functional
structure of benthic foraminiferal communities. Marine Pollution
Bulletin, 213, 117699.</p></li>
</ol>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Anthony Basooma, Florian Borgwardt, Thomas Hein, Astrid Schmidt-Kloiber.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
